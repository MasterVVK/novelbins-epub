# Анализ системы цветов статусов в web_app

## Текущее состояние

### 1. Статусы новелл (Novel.status)
**Возможные значения:**
- `pending` - ожидание
- `parsing` - парсинг
- `translating` - перевод
- `editing` - редактура
- `completed` - завершено
- `deleted` - удалено

**Текущие цвета:**
```html
<!-- novel_detail.html:32 -->
<span class="badge bg-{{ 'success' if novel.status == 'completed' else 'warning' if novel.status == 'translating' else 'info' }}">
```

**Проблемы:**
- Не покрыты все статусы (`parsing`, `editing`, `deleted`)
- Нет единообразия с другими компонентами

### 2. Статусы глав (Chapter.status)
**Возможные значения:**
- `pending` - ожидание
- `parsed` - распарсено
- `translated` - переведено
- `edited` - отредактировано
- `error` - ошибка

**Текущие цвета:**
```html
<!-- novel_detail.html:219 -->
<span class="badge bg-{{ 'success' if chapter.status == 'edited' else 'warning' if chapter.status == 'translated' else 'info' if chapter.status == 'parsed' else 'secondary' }}">
```

**Проблемы:**
- Статус `error` не обработан
- Статус `pending` получает `secondary` (серый), что не очень информативно

### 3. Статусы задач (Task.status)
**Возможные значения:**
- `pending` - ожидание
- `running` - выполняется
- `completed` - завершено
- `failed` - ошибка

**Текущие цвета:**
```html
<!-- tasks.html:60 -->
<span class="badge bg-{{ 'success' if task.status == 'completed' else 'danger' if task.status == 'failed' else 'warning' if task.status == 'running' else 'secondary' }}">
```

**Проблемы:**
- Статус `pending` получает `secondary` (серый)

### 4. Типы задач (Task.task_type)
**Возможные значения:**
- `parse` - парсинг
- `translate` - перевод
- `edit` - редактура
- `generate_epub` - генерация EPUB

**Текущие цвета:**
```html
<!-- tasks.html:46 -->
<span class="badge bg-{{ 'primary' if task.task_type == 'parse' else 'success' if task.task_type == 'translate' else 'warning' if task.task_type == 'edit' else 'info' }}">
```

**Проблемы:**
- Тип `generate_epub` получает `info` (синий), что может конфликтовать с другими статусами

### 5. Статусы шаблонов промптов (PromptTemplate)
**Возможные значения:**
- `is_default` - по умолчанию
- `is_active` - активен/неактивен

**Текущие цвета:**
```html
<!-- prompt_templates.html:21,32,34 -->
<span class="badge bg-success">По умолчанию</span>
<span class="badge bg-success">Активен</span>
<span class="badge bg-secondary">Неактивен</span>
```

### 6. Логи (LogEntry)
**Возможные значения:**
- `INFO` - информация
- `WARNING` - предупреждение
- `ERROR` - ошибка

**Текущие цвета:**
```javascript
// logs.html:247
<span class="badge bg-${log.is_error ? 'danger' : log.is_warning ? 'warning' : 'info'} me-2">${log.level}</span>
```

## Проблемы текущей системы

### 1. Неоднозначность цветов
- `success` используется для разных понятий (завершение, перевод, активность)
- `warning` используется для разных понятий (выполнение, перевод, предупреждения)
- `info` используется для разных понятий (парсинг, информация, типы задач)

### 2. Неполное покрытие статусов
- Некоторые статусы не имеют цветов
- Некоторые статусы получают неинформативные цвета (`secondary`)

### 3. Отсутствие единообразия
- Разные компоненты используют разные цвета для одинаковых статусов
- Нет централизованной системы цветов

### 4. Семантическая путаница
- Цвета не всегда соответствуют семантике статуса
- Нет четкой связи между цветом и значением

## Рекомендуемая система цветов

### Принципы:
1. **Семантическая ясность** - цвет должен отражать значение статуса
2. **Единообразие** - одинаковые статусы должны иметь одинаковые цвета
3. **Доступность** - цвета должны быть различимы для всех пользователей
4. **Интуитивность** - цвета должны быть понятны без объяснений

### Предлагаемая схема:

#### Статусы процесса:
- `pending` → `secondary` (серый) - ожидание
- `running` → `warning` (желтый) - выполняется
- `completed` → `success` (зеленый) - завершено
- `failed` → `danger` (красный) - ошибка

#### Статусы контента:
- `parsed` → `info` (синий) - распарсено
- `translated` → `primary` (темно-синий) - переведено
- `edited` → `success` (зеленый) - отредактировано
- `error` → `danger` (красный) - ошибка

#### Типы задач:
- `parse` → `info` (синий) - парсинг
- `translate` → `primary` (темно-синий) - перевод
- `edit` → `warning` (желтый) - редактура
- `generate_epub` → `dark` (темно-серый) - генерация EPUB

#### Специальные статусы:
- `deleted` → `danger` (красный) - удалено
- `is_default` → `success` (зеленый) - по умолчанию
- `is_active` → `success` (зеленый) / `secondary` (серый) - активен/неактивен

#### Уровни логов:
- `INFO` → `info` (синий) - информация
- `WARNING` → `warning` (желтый) - предупреждение
- `ERROR` → `danger` (красный) - ошибка

## План реализации

### 1. Создание централизованной системы цветов
- Создать утилиту для получения цвета статуса
- Определить константы для всех статусов
- Создать документацию по использованию

### 2. Обновление шаблонов
- Заменить inline логику цветов на вызовы утилиты
- Обновить все шаблоны для использования новой системы
- Добавить недостающие цвета для всех статусов

### 3. Тестирование
- Проверить все возможные статусы
- Убедиться в единообразии цветов
- Проверить доступность цветов

### 4. Документация
- Создать руководство по использованию цветов
- Добавить примеры для разработчиков
- Обновить README проекта 
# ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ Cloudflare Turnstile —á–µ—Ä–µ–∑ Qwen3-VL

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è Cloudflare Turnstile challenge —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **–ª–æ–∫–∞–ª—å–Ω–æ–π** vision –º–æ–¥–µ–ª–∏ Qwen3-VL —á–µ—Ä–µ–∑ Ollama.

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- **$0 —Å—Ç–æ–∏–º–æ—Å—Ç—å** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ (–ª–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å)
- **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å** - –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–∫–∏–¥–∞—é—Ç —Å–µ—Ä–≤–µ—Ä
- **–í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å** - **~2px –æ—à–∏–±–∫–∞** –ø–æ—Å–ª–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ (–±—ã–ª–æ 130px)
- **–ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã
- **–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - –Ω–µ—Ç rate limits
- **–ë—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å** - qwen3-vl:4b (9.5 —Å–µ–∫, —Ç—Ä–µ–±—É–µ—Ç 4GB VRAM)

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ (2025-11-10):**
```
150+ —Ç–µ—Å—Ç–æ–≤ ‚Üí –°–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–º–µ—â–µ–Ω–∏–µ: X-130px, Y+0px
–î–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º: 100% (100 –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí 100 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
–§–æ—Ä–º–∞—Ç: PNG = JPEG = WebP = BMP (0px —Ä–∞–∑–Ω–∏—Ü–∞)
–ú–æ–¥–µ–ª—å: 2B = 4B = 8B (–∏–¥–µ–Ω—Ç–∏—á–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, <1px —Ä–∞–∑–Ω–∏—Ü–∞)
–ü—Ä–æ–º–ø—Ç: 15+ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ ‚Üí 0% –≤–ª–∏—è–Ω–∏–µ

‚úÖ –†–µ—à–µ–Ω–∏–µ: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è x = x_raw + 130
```

**–ü–æ—Å–ª–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏:**
```
–ü–æ–ø—ã—Ç–∫–∞ 1: RAW (280, 290) ‚Üí –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ (410, 290)  ‚úÖ 0px X, 0px Y
–ü–æ–ø—ã—Ç–∫–∞ 2: RAW (280, 290) ‚Üí –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ (410, 290)  ‚úÖ 0px X, 0px Y
–ü–æ–ø—ã—Ç–∫–∞ 3: RAW (280, 290) ‚Üí –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ (410, 290)  ‚úÖ 0px X, 0px Y
–£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 100% (3/3)
```

**Production —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```
‚úÖ –†–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ czbooks.net - –£–°–ü–ï–• –Ω–∞ 2-–π –ø–æ–ø—ã—Ç–∫–µ
‚úÖ –ù–∞–π–¥–µ–Ω–æ 2083 –≥–ª–∞–≤—ã
‚úÖ iframe –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ –ú–æ–¥–µ–ª—å qwen3-vl:4b - –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ 27% (9.5—Å vs 13.1—Å)
```

**–¢–æ—á–Ω–æ—Å—Ç—å: ~2px –ø–æ—Å–ª–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏** üéØ

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Ollama –∑–∞–ø—É—â–µ–Ω
curl http://localhost:11434/api/tags

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–∏
curl -s http://localhost:11434/api/tags | grep qwen3-vl:4b
```

### 2. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç
python3 test_qwen_vision.py --model qwen3-vl:8b

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫
ls -lh /tmp/test_*.png
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø–∞—Ä—Å–∏–Ω–≥–µ

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ Cloudflare:

```python
# –í czbooks_parser.py —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ!
# –ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ Turnstile:
# 1. –û–±—ã—á–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (15-20 —Å–µ–∫) - –ø–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è
# 2. –ï—Å–ª–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ ‚Üí Qwen3-VL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ (3 –ø–æ–ø—ã—Ç–∫–∏)
# 3. –ï—Å–ª–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ ‚Üí –†—É—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ VNC
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```env
# Cloudflare Solver —á–µ—Ä–µ–∑ Ollama + Qwen3-VL
CLOUDFLARE_SOLVER_ENABLED=true
CLOUDFLARE_SOLVER_MODEL=qwen3-vl:4b
OLLAMA_BASE_URL=http://localhost:11434
CLOUDFLARE_SOLVER_MAX_ATTEMPTS=3
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| `CLOUDFLARE_SOLVER_ENABLED` | `true` | –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ |
| `CLOUDFLARE_SOLVER_MODEL` | `qwen3-vl:8b` | –ú–æ–¥–µ–ª—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |
| `OLLAMA_BASE_URL` | `http://localhost:11434` | URL Ollama API |
| `CLOUDFLARE_SOLVER_MAX_ATTEMPTS` | `3` | –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫ |

---

## üõ†Ô∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **CloudflareSolverOllama** (`web_app/app/services/cloudflare_solver_ollama.py`)
   - –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Qwen3-VL —á–µ—Ä–µ–∑ Ollama API
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —á–µ–∫–±–æ–∫—Å–∞

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ czbooks_parser** (`parsers/sources/czbooks_parser.py:475-512`)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ Turnstile
   - Fallback –Ω–∞ —Ä—É—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ VNC

3. **–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç** (`test_qwen_vision.py`)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã vision API
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ—à–µ–Ω–∏—è

```
1. –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ Cloudflare Turnstile
   ‚Üì
2. –°–∫—Ä–∏–Ω—à–æ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Selenium)
   ‚Üì
3. –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ Qwen3-VL vision
   ‚Üì
4. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —á–µ–∫–±–æ–∫—Å–∞
   ‚Üì
5. –ö–ª–∏–∫ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º (Selenium Actions)
   ‚Üì
6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—Ö–∞ (4 —Å–µ–∫ –∑–∞–¥–µ—Ä–∂–∫–∞)
   ‚Üì
7. Success ‚úÖ –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä (–¥–æ 3 —Ä–∞–∑)
```

---

## ‚ö° –ü—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (2025-11-07)

### 1. –£–≤–µ–ª–∏—á–µ–Ω—ã –ª–∏–º–∏—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–¥–µ–ª—å qwen3-vl:8b –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `thinking` (chain-of-thought), –∫–æ—Ç–æ—Ä–æ–µ —Å—ä–µ–¥–∞–ª–æ –≤–µ—Å—å –ª–∏–º–∏—Ç `num_predict: 512`, –æ—Å—Ç–∞–≤–ª—è—è –ø–æ–ª–µ `response` –ø—É—Å—Ç—ã–º –∏–ª–∏ –æ–±—Ä–µ–∑–∞–Ω–Ω—ã–º.

**–†–µ—à–µ–Ω–∏–µ:**
```python
"options": {
    "num_predict": 4096,  # –ë—ã–ª–æ: 512 ‚Üí 2048 ‚Üí 4096 (—É–≤–µ–ª–∏—á–µ–Ω–æ 8x)
    "num_ctx": 8192,      # –ë—ã–ª–æ: 4096 (—É–≤–µ–ª–∏—á–µ–Ω–æ 2x)
}
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –ü–æ–ª–Ω—ã–π JSON –≤ –ø–æ–ª–µ response (–Ω–µ –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è)
- ‚úÖ `done_reason: "stop"` –≤–º–µ—Å—Ç–æ `"length"`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤: 20-40% –≤–º–µ—Å—Ç–æ 100%

### 2. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –≤ GPU

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–¥–µ–ª—å –≤—ã–≥—Ä—É–∂–∞–ª–∞—Å—å –∏–∑ GPU –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å —Ç—Ä–µ–±–æ–≤–∞–ª –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ 6GB –≤ –ø–∞–º—è—Ç—å (~15-30 —Å–µ–∫).

**–†–µ—à–µ–Ω–∏–µ:**
```python
"keep_alive": "5m"  # –î–µ—Ä–∂–∞—Ç—å –º–æ–¥–µ–ª—å –≤ GPU 5 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç: ~20 —Å–µ–∫ (–ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å)
- ‚úÖ –ì–æ—Ä—è—á–∏–π —Å—Ç–∞—Ä—Ç: ~3-5 —Å–µ–∫ (–ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç)
- ‚úÖ –£—Å–∫–æ—Ä–µ–Ω–∏–µ –¥–æ 4-6x –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö

### 3. Fallback –Ω–∞ –ø–æ–ª–µ "thinking"

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞–∂–µ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤, –º–æ–¥–µ–ª—å –∏–Ω–æ–≥–¥–∞ –æ—Å—Ç–∞–≤–ª—è–µ—Ç `response` –ø—É—Å—Ç—ã–º, –Ω–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `thinking`.

**–†–µ—à–µ–Ω–∏–µ:**
```python
if not answer and 'thinking' in data:
    thinking = data.get('thinking', '').strip()
    coords_from_thinking = self._extract_coordinates_from_text(thinking)
    if coords_from_thinking:
        return coords_from_thinking  # –ò–∑–≤–ª–µ–∫–∞–µ–º —á–µ—Ä–µ–∑ regex
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç: 100% (3/3 –≤ —Ç–µ—Å—Ç–∞—Ö)
- ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ response –ø—É—Å—Ç–æ–π

### 4. –û–∂–∏–¥–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö iframe

**–ü—Ä–æ–±–ª–µ–º–∞:** Cloudflare Turnstile –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ iframe, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

**–†–µ—à–µ–Ω–∏–µ:**
```python
WebDriverWait(self.driver, 5).until(
    EC.presence_of_element_located((By.TAG_NAME, "iframe"))
)
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ iframe –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è: 3 –Ω–∞–π–¥–µ–Ω–æ (–±—ã–ª–æ 0)
- ‚úÖ –ö–ª–∏–∫ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

### 5. –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ mouse events

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ—Å—Ç–æ–π JavaScript `click()` –º–æ–∂–µ—Ç –Ω–µ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—å event listeners Cloudflare.

**–†–µ—à–µ–Ω–∏–µ:**
```python
var events = [
    new MouseEvent('mouseover', {...}),
    new MouseEvent('mousedown', {...}),
    new MouseEvent('mouseup', {...}),
    new MouseEvent('click', {...})
];
events.forEach(e => element.dispatchEvent(e));
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ Cloudflare –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç –∫–ª–∏–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Turnstile –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

### 6. –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:**
```python
debug_path = f"/tmp/ollama_debug_attempt_{attempt}.json"
with open(debug_path, 'w') as f:
    json.dump(data, f, indent=2, ensure_ascii=False)
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –ü–æ–ª–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã Ollama —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ –õ–µ–≥—á–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°–∫–æ—Ä–æ—Å—Ç—å

**–° GPU (RTX 3090):**
- **–•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç** (–ø–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏): ~15-20 —Å–µ–∫
- **–ì–æ—Ä—è—á–∏–π —Å—Ç–∞—Ä—Ç** (–º–æ–¥–µ–ª—å –≤ GPU): ~3-5 —Å–µ–∫
- **–° –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º** (`keep_alive: 5m`): —É—Å–∫–æ—Ä–µ–Ω–∏–µ 4-6x

**–ë–µ–∑ GPU (CPU only):**
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å: ~30-60 —Å–µ–∫
- –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ: ~15-30 —Å–µ–∫

**–†–µ–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞:**
- –ü–æ–ø—ã—Ç–∫–∞ 1: ~33 —Å–µ–∫ (—Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç + –∞–Ω–∞–ª–∏–∑ + –∫–ª–∏–∫)
- –ü–æ–ø—ã—Ç–∫–∞ 2: ~28 —Å–µ–∫ (–≥–æ—Ä—è—á–∏–π —Å—Ç–∞—Ä—Ç + –∞–Ω–∞–ª–∏–∑ + –∫–ª–∏–∫ + success!)
- –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º: ~15 —Å–µ–∫ –Ω–∞ –ø–æ–ø—ã—Ç–∫—É

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∂–µ–ª–µ–∑—É

**–¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å: qwen3-vl:4b (3.3GB)** ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø
- RAM: 8GB –º–∏–Ω–∏–º—É–º
- VRAM: 4GB+ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è (GTX 1050 Ti –∏ –≤—ã—à–µ)
- –î–∏—Å–∫: 3.3GB –¥–ª—è –º–æ–¥–µ–ª–∏
- –°–∫–æ—Ä–æ—Å—Ç—å: ~9.5 —Å–µ–∫ (–Ω–∞ 27% –±—ã—Å—Ç—Ä–µ–µ 8B)
- –¢–æ—á–Ω–æ—Å—Ç—å: **–∏–¥–µ–Ω—Ç–∏—á–Ω–∞ 8B** (–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: qwen3-vl:8b (6GB)**
- RAM: 16GB –º–∏–Ω–∏–º—É–º
- VRAM: 8GB+ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è (RTX 3090 –∏–¥–µ–∞–ª—å–Ω–æ)
- –î–∏—Å–∫: 6.1GB –¥–ª—è –º–æ–¥–µ–ª–∏
- –°–∫–æ—Ä–æ—Å—Ç—å: ~13.1 —Å–µ–∫
- –¢–æ—á–Ω–æ—Å—Ç—å: **–∏–¥–µ–Ω—Ç–∏—á–Ω–∞ 4B**

**–ë–æ–ª—å—à–∞—è –º–æ–¥–µ–ª—å: qwen3-vl:32b (21GB)**
- RAM: 32GB –º–∏–Ω–∏–º—É–º
- VRAM: 24GB (RTX 3090/4090)
- –î–∏—Å–∫: 21GB –¥–ª—è –º–æ–¥–µ–ª–∏
- –¢–æ—á–Ω–æ—Å—Ç—å: **–Ω–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞** (–æ–∂–∏–¥–∞–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞)

---

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

### –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ qwen3-vl:32b (–¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞)

```bash
# 1. –°–∫–∞—á–∞—Ç—å –º–æ–¥–µ–ª—å (21GB)
ollama pull qwen3-vl:32b

# 2. –û–±–Ω–æ–≤–∏—Ç—å .env
CLOUDFLARE_SOLVER_MODEL=qwen3-vl:32b

# 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
python3 test_qwen_vision.py --model qwen3-vl:32b
```

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

–õ–æ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è:

```bash
# –í –ª–æ–≥–∞—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏—â–∏—Ç–µ:
grep "Qwen3-VL" logs/app.log
grep "Turnstile" logs/app.log
grep "iframe" logs/app.log
grep "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞–π–¥–µ–Ω—ã" logs/app.log
```

### Debug —Ñ–∞–π–ª—ã Ollama

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è:

```bash
# –ü–æ–ª–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç Ollama (–≤–∫–ª—é—á–∞—è thinking, response, done_reason)
/tmp/ollama_debug_attempt_1.json
/tmp/ollama_debug_attempt_2.json
/tmp/ollama_debug_attempt_3.json

# –ê–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–∞:
cat /tmp/ollama_debug_attempt_1.json | jq '.'
cat /tmp/ollama_debug_attempt_1.json | jq '.response'
cat /tmp/ollama_debug_attempt_1.json | jq '.thinking'
cat /tmp/ollama_debug_attempt_1.json | jq '.done_reason'
cat /tmp/ollama_debug_attempt_1.json | jq '.eval_count'
```

### –°–∫—Ä–∏–Ω—à–æ—Ç—ã Cloudflare challenge

–†–µ–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–∑ –ø–∞—Ä—Å–∏–Ω–≥–∞:

```bash
# –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏ —Ä–µ—à–µ–Ω–∏—è
/tmp/cloudflare_turnstile_attempt_1.png
/tmp/cloudflare_turnstile_attempt_2.png
/tmp/cloudflare_turnstile_attempt_3.png

# –ü—Ä–æ—Å–º–æ—Ç—Ä:
eog /tmp/cloudflare_turnstile_attempt_1.png
```

### –¢–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ test_qwen_vision.py —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:

```bash
/tmp/test_button.png      # –ü—Ä–æ—Å—Ç–∞—è –∫–Ω–æ–ø–∫–∞
/tmp/test_cloudflare.png  # –ú–æ–∫ Cloudflare Turnstile
```

### –†—É—á–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞

```python
from app.services.cloudflare_solver_ollama import CloudflareSolverOllama

# –° Selenium driver
solver = CloudflareSolverOllama(driver)

# –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤—ã–∑–æ–≤
import asyncio
result = asyncio.run(solver.solve_turnstile(max_attempts=3))

print(f"–†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –†–µ–∞–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π)

**Success rate:**
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: 100% (3/3 –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–Ω—à–æ—Ç–∞—Ö)
- **Production**: 50% (1/2 –ø–æ–ø—ã—Ç–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –ø–∞—Ä—Å–∏–Ω–≥–µ)
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: 70-85% –ø–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤

**–¢–æ—á–Ω–æ—Å—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:**
- **–°–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: 0px –æ—à–∏–±–∫–∞ (–∏–¥–µ–∞–ª—å–Ω–æ!)
- **–†–µ–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã**: ¬±5px –≤–∞—Ä–∏–∞—Ü–∏—è (–æ—Ç–ª–∏—á–Ω–æ –¥–ª—è 15-25px —á–µ–∫–±–æ–∫—Å–æ–≤)
- **–°—Ä–µ–¥–Ω–µ–µ**: (277, 285) –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
- **–•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç**: 15-20 —Å–µ–∫ (–∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏)
- **–ì–æ—Ä—è—á–∏–π —Å—Ç–∞—Ä—Ç**: 3-5 —Å–µ–∫ (–º–æ–¥–µ–ª—å –≤ –∫–µ—à–µ)
- **–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–µ—à–µ–Ω–∏—è**: 28-33 —Å–µ–∫ (—Å–∫—Ä–∏–Ω—à–æ—Ç + –∞–Ω–∞–ª–∏–∑ + –∫–ª–∏–∫ + –ø—Ä–æ–≤–µ—Ä–∫–∞)

### –ß—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—Ö–æ–º?

‚úÖ Turnstile —á–µ–∫–±–æ–∫—Å –Ω–∞–π–¥–µ–Ω (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑–≤–ª–µ—á–µ–Ω—ã)
‚úÖ iframe –æ–±–Ω–∞—Ä—É–∂–µ–Ω –∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω
‚úÖ –ö–ª–∏–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å –±–µ–∑ challenge
‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞

### –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π)

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|----------------|-------------------|-----------|
| **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç** | 33% (1/3) | **100%** (3/3) | **+200%** |
| **–ü–æ–ª–Ω–æ—Ç–∞ JSON** | 33% (–æ–±—Ä–µ–∑–∞–Ω) | **100%** (–ø–æ–ª–Ω—ã–π) | **+200%** |
| **done_reason** | `"length"` | `"stop"` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤** | 100% (512/512) | 20-40% (791-1639/4096) | **-60-80%** |
| **iframe detection** | 0 –Ω–∞–π–¥–µ–Ω–æ | 3 –Ω–∞–π–¥–µ–Ω–æ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| **–°–∫–æ—Ä–æ—Å—Ç—å (–≥–æ—Ä—è—á–∏–π —Å—Ç–∞—Ä—Ç)** | ~20 —Å–µ–∫ | ~5 —Å–µ–∫ | **4x –±—ã—Å—Ç—Ä–µ–µ** |

---

## üî¨ –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (2025-11-10)

### –ü—Ä–æ–±–ª–µ–º–∞

–ú–æ–¥–µ–ª—å —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏–ª–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–æ —Å–º–µ—â–µ–Ω–∏–µ–º **X-130px, Y+0px** –æ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö.

### –ü—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

**–í—Å–µ–≥–æ: 150+ —Ç–µ—Å—Ç–æ–≤, 8 —Å–∫—Ä–∏–ø—Ç–æ–≤, 4 –¥–Ω—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π**

| –§–∞–∫—Ç–æ—Ä | –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ | –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å |
|--------|----------------|---------------------|
| **–î–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º** | 100 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ | ‚úÖ 100% —Å—Ç–∞–±–∏–ª—å–Ω–æ (0px –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ) |
| **–†–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏** | 2B, 4B, 8B | ‚ùå 0% (<1px —Ä–∞–∑–Ω–∏—Ü–∞) |
| **–§–æ—Ä–º–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** | PNG, JPEG, WebP, BMP | ‚ùå 0% (–∞–±—Å–æ–ª—é—Ç–Ω–æ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ) |
| **–°—Ç–µ–ø–µ–Ω—å —Å–∂–∞—Ç–∏—è** | 70%, 85%, 95% | ‚ùå 0% (–Ω–µ –≤–ª–∏—è–µ—Ç) |
| **–ü—Ä–æ–º–ø—Ç-–∏–Ω–∂–µ–Ω–µ—Ä–∏–Ω–≥** | 15+ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ | ‚ùå 0% (–≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–∞—é—Ç (280, 290)) |
| **–û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞** | 10px, 18px, 30px, 40px | ‚ùå 0% (–Ω–µ –≤–ª–∏—è–µ—Ç) |
| **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞** | 800√ó600, 1280√ó720, 1920√ó1080 | ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û** (œÉ=166px) |
| **Grid –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç** | 50px —Å–µ—Ç–∫–∞ | ‚úÖ +44.7% –Ω–∞ 1920√ó1080, -19.6% –Ω–∞ 800√ó600 |

### –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Ö–æ–¥–∫–∏

1. **–ú–æ–¥–µ–ª—å "–∑–∞—Å—Ç—Ä–µ–≤–∞–µ—Ç" –≤ –æ–¥–Ω–æ–π —Ç–æ—á–∫–µ**: (280, 290) –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —á–µ–≥–æ-–ª–∏–±–æ
2. **–°–º–µ—â–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ**: X-130px, Y+0px –Ω–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ ~1919√ó992
3. **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 0.0 –¥–∞—ë—Ç 100% –¥–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º**: Sigma = 0.0px –Ω–∞ 100 –∑–∞–ø—Ä–æ—Å–∞—Ö
4. **–§–æ—Ä–º–∞—Ç –ù–ï –≤–ª–∏—è–µ—Ç**: PNG = JPEG = WebP = BMP (0px —Ä–∞–∑–Ω–∏—Ü–∞)

### –†–µ—à–µ–Ω–∏–µ

**–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –≤ –∫–æ–¥–µ:**
```python
x_raw, y_raw = coords['x'], coords['y']
x = x_raw + 130  # –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è —Å–º–µ—â–µ–Ω–∏—è -130px
y = y_raw        # Y –∏–¥–µ–∞–ª—å–Ω–∞ (0-2px –æ—à–∏–±–∫–∞)
```

**–û–∂–∏–¥–∞–µ–º–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏:**
- X: 0-2px (—Å —É—á–µ—Ç–æ–º –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏)
- Y: 0-2px (–º–æ–¥–µ–ª—å –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ç–æ—á–Ω–∞)
- **Total: ~2px** ‚úÖ

### –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏, —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏: `CLOUDFLARE_OFFSET_ANALYSIS.md`

---

## ‚ùì FAQ

**Q: –ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å, –∞ –Ω–µ Claude API?**
A: –õ–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å = $0 —Å—Ç–æ–∏–º–æ—Å—Ç—å, –ø–æ–ª–Ω–∞—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å, –Ω–µ—Ç rate limits

**Q: –ü–æ—á–µ–º—É qwen3-vl:4b, –∞ –Ω–µ 8b –∏–ª–∏ 32b?**
A: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ: 4B –∏–º–µ–µ—Ç **–∏–¥–µ–Ω—Ç–∏—á–Ω—É—é —Ç–æ—á–Ω–æ—Å—Ç—å** 8B, –Ω–æ –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ 27% (9.5—Å vs 13.1—Å). –≠–∫–æ–Ω–æ–º–∏—è VRAM (3.3GB vs 6GB).

**Q: –ö–∞–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏?**
A: **~2px** (Y –∏–¥–µ–∞–ª—å–Ω–∞ 0-2px + —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è X). –î–æ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –±—ã–ª–æ 130px.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
A: –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ —Ä—É—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ VNC (http://localhost:6080/vnc.html)

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ–∑ GPU?**
A: –î–∞, –Ω–æ –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ (~15-30 —Å–µ–∫ –≤–º–µ—Å—Ç–æ 3-5 —Å–µ–∫). qwen3-vl:4b —Ç—Ä–µ–±—É–µ—Ç –≤—Å–µ–≥–æ 4GB VRAM.

**Q: –°—Ç–æ–∏—Ç –ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –Ω–∞ qwen3-vl:32b?**
A: –ù–µ—Ç. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑–∞–ª–æ: –≤—Å–µ —Ä–∞–∑–º–µ—Ä—ã (2B, 4B, 8B) –¥–∞—é—Ç **–∏–¥–µ–Ω—Ç–∏—á–Ω—É—é —Ç–æ—á–Ω–æ—Å—Ç—å**. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 4B.

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ**: –ë–∞–∑–æ–≤–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è GUI (0px —Ç–æ—á–Ω–æ—Å—Ç—å)
2. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ**: –†–µ–∞–ª—å–Ω—ã–µ Cloudflare —Å–∫—Ä–∏–Ω—à–æ—Ç—ã (100% —É—Å–ø–µ—Ö)
3. ‚úÖ **–ì–æ—Ç–æ–≤–æ**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ czbooks_parser
4. ‚úÖ **–ì–æ—Ç–æ–≤–æ**: –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
5. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ**: Production –ø–∞—Ä—Å–∏–Ω–≥ (2083 –≥–ª–∞–≤—ã)
6. üîÑ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**: –ó–∞–ø—É—Å—Ç–∏—Ç—å 3-5 —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä—Å–∏–Ω–≥–æ–≤ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
7. üìã **–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è**: –ú–µ—Ç—Ä–∏–∫–∏ –∏ –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

**2025-11-10** (–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç + –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ 4B)
- ‚úÖ **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–°–õ–ï–î–û–í–ê–ù–ò–ï**: 150+ —Ç–µ—Å—Ç–æ–≤ —Ç–æ—á–Ω–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ **—Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–º–µ—â–µ–Ω–∏–µ X-130px, Y‚âà0px** (100% —Å—Ç–∞–±–∏–ª—å–Ω–æ)
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ: —Ä–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏ (2B/4B/8B), —Ñ–æ—Ä–º–∞—Ç—ã (PNG/WebP/BMP), –ø—Ä–æ–º–ø—Ç—ã (15+)
- ‚úÖ **–í—ã–≤–æ–¥**: –§–æ—Ä–º–∞—Ç, –º–æ–¥–µ–ª—å, –ø—Ä–æ–º–ø—Ç –ù–ï –≤–ª–∏—è—é—Ç - —Å–º–µ—â–µ–Ω–∏–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ **—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è** –≤ `cloudflare_solver_ollama.py`
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ **qwen3-vl:4b** (—Ç–∞–∫–∞—è –∂–µ —Ç–æ—á–Ω–æ—Å—Ç—å, –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ 27%: 9.5—Å vs 13.1—Å)
- ‚úÖ **–û–∂–∏–¥–∞–µ–º–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å**: 0-2px (Y –∏–¥–µ–∞–ª—å–Ω–∞ + —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è X)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `CLOUDFLARE_OFFSET_ANALYSIS.md`

**2025-11-07** (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω `num_predict` —Å 512 ‚Üí 2048 ‚Üí 4096 —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω `num_ctx` —Å 4096 ‚Üí 8192 —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ `keep_alive: "5m"` (—É—Å–∫–æ—Ä–µ–Ω–∏–µ 4-6x)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ –ø–æ–ª–µ `thinking` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–∂–∏–¥–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö iframe (5 —Å–µ–∫)
- ‚úÖ –£–ª—É—á—à–µ–Ω—ã mouse events (mouseover ‚Üí mousedown ‚Üí mouseup ‚Üí click)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ Ollama
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–Ω—à–æ—Ç–∞—Ö: 100% —É—Å–ø–µ—Ö (3/3)
- ‚úÖ Production —Ç–µ—Å—Ç: —É—Å–ø–µ—Ö –Ω–∞ 2-–π –ø–æ–ø—ã—Ç–∫–µ, 2083 –≥–ª–∞–≤—ã —Å–ø–∞—Ä—Å–µ–Ω—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `–ü–ê–†–°–ò–ù–ì_–ü–†–û–ë–õ–ï–ú–ê_–ê–ù–ê–õ–ò–ó.md`, `–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø_–ü–†–ò–ú–ï–ù–ï–ù–´.md`, `–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï_–†–ï–ó–£–õ–¨–¢–ê–¢–´.md`

**2025-11-05**
- ‚úÖ –°–æ–∑–¥–∞–Ω CloudflareSolverOllama —Å–µ—Ä–≤–∏—Å
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ czbooks_parser.py
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç test_qwen_vision.py
- ‚úÖ –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (0px —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö)
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–±–ª–µ–º –∏ —Ä–µ—à–µ–Ω–∏–π —Å–æ–∑–¥–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:

### –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á—ë—Ç—ã

1. **`–ü–ê–†–°–ò–ù–ì_–ü–†–û–ë–õ–ï–ú–ê_–ê–ù–ê–õ–ò–ó.md`** - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã
   - –ö–æ—Ä–Ω–µ–≤—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–∫–∞–∑–∞ (–ª–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ iframe, –∏ —Ç.–¥.)
   - –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å czbooks.net
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å –∫–æ–¥–æ–º

2. **`–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø_–ü–†–ò–ú–ï–ù–ï–ù–´.md`** - –û—Ç—á—ë—Ç –æ –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö
   - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å –∫–æ–¥–æ–º
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ "–¥–æ –∏ –ø–æ—Å–ª–µ"
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

3. **`–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï_–†–ï–ó–£–õ–¨–¢–ê–¢–´.md`** - –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
   - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º 3 –ø–æ–ø—ã—Ç–∫–∞–º
   - –ê–Ω–∞–ª–∏–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ –≤–∞—Ä–∏–∞—Ü–∏–π
   - –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è
   - –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

1. **`test_qwen_vision.py`** - –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö
   ```bash
   python3 test_qwen_vision.py --model qwen3-vl:8b
   ```

2. **`test_real_cloudflare_screenshots.py`** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–Ω—à–æ—Ç–∞—Ö
   ```bash
   python3 test_real_cloudflare_screenshots.py --model qwen3-vl:8b
   ```

### Debug —Ñ–∞–π–ª—ã

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å–∏—Å—Ç–µ–º—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:

```bash
# –°–∫—Ä–∏–Ω—à–æ—Ç—ã –ø–æ–ø—ã—Ç–æ–∫ —Ä–µ—à–µ–Ω–∏—è
/tmp/cloudflare_turnstile_attempt_1.png
/tmp/cloudflare_turnstile_attempt_2.png
/tmp/cloudflare_turnstile_attempt_3.png

# –ü–æ–ª–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã Ollama –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏
/tmp/ollama_debug_attempt_1.json
/tmp/ollama_debug_attempt_2.json
/tmp/ollama_debug_attempt_3.json

# –û—Ç–≤–µ—Ç—ã –∏–∑ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
/tmp/test_real_attempt_1_response.json
/tmp/test_real_attempt_2_response.json
/tmp/test_real_attempt_3_response.json
```

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- **Qwen Team (Alibaba)** –∑–∞ –æ—Ç–ª–∏—á–Ω—É—é vision –º–æ–¥–µ–ª—å
- **Ollama** –∑–∞ —É–¥–æ–±–Ω—ã–π API –∏ –ª–æ–∫–∞–ª—å–Ω—ã–π inference
- **Anthropic** –∑–∞ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ (Computer Use API)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–∏–º–∏—Ç–æ–≤ Ollama API

## –¢–∏–ø—ã –æ—à–∏–±–æ–∫

Ollama API (–æ—Å–æ–±–µ–Ω–Ω–æ –æ–±–ª–∞—á–Ω—ã–µ –º–æ–¥–µ–ª–∏) –∏–º–µ—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫:

### 1. **Hourly Limit** (–ß–∞—Å–æ–≤–æ–π –ª–∏–º–∏—Ç) ‚ö†Ô∏è
**–û—à–∏–±–∫–∞**: `you've reached your hourly usage limit`

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã**:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏
- 4 –ø–æ–ø—ã—Ç–∫–∏ —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º: 1 –º–∏–Ω ‚Üí 5 –º–∏–Ω ‚Üí 15 –º–∏–Ω ‚Üí 40 –º–∏–Ω
- –û–±—â–µ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è: ~61 –º–∏–Ω—É—Ç–∞

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```
‚ö†Ô∏è –î–æ—Å—Ç–∏–≥–Ω—É—Ç —á–∞—Å–æ–≤–æ–π –ª–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ kimi-k2:1t-cloud
‚è≥ –ü–æ–ø—ã—Ç–∫–∞ 1/4: –û–∂–∏–¥–∞–Ω–∏–µ 1 –º–∏–Ω—É—Ç—É –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º...
```

### 2. **Daily Limit** (–î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç) üö´
**–û—à–∏–±–∫–∞**: `you've reached your daily usage limit`

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã**:
- ‚ùå –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ù–ï –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è (–±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ)
- –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –≤ `prompt_history`

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```
üö´ –î–æ—Å—Ç–∏–≥–Ω—É—Ç –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ kimi-k2:1t-cloud
üõë –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã - –ª–∏–º–∏—Ç –¥–µ–π—Å—Ç–≤—É–µ—Ç –¥–Ω–µ–≤–Ω–æ–π –¥–µ–Ω—å
üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
   1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å Ollama
   2. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–±—Ä–æ—Å–∞ –ª–∏–º–∏—Ç–∞
   3. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω
```

### 3. **Weekly Limit** (–ù–µ–¥–µ–ª—å–Ω—ã–π –ª–∏–º–∏—Ç) üö´
**–û—à–∏–±–∫–∞**: `you've reached your weekly usage limit`

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã**:
- ‚ùå –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ù–ï –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è (–±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ)
- –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –≤ `prompt_history`

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```
üö´ –î–æ—Å—Ç–∏–≥–Ω—É—Ç –Ω–µ–¥–µ–ª—å–Ω—ã–π –ª–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ kimi-k2:1t-cloud
üõë –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã - –ª–∏–º–∏—Ç –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–µ–¥–µ–ª—å–Ω—É—é –Ω–µ–¥–µ–ª—é
üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
   1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å Ollama
   2. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–±—Ä–æ—Å–∞ –ª–∏–º–∏—Ç–∞
   3. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω
```

### 4. **Upstream Error** (–û—à–∏–±–∫–∞ upstream) ‚ö†Ô∏è
**–û—à–∏–±–∫–∞**: `upstream error` (HTTP 502)

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã**:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏
- 2 –ø–æ–ø—ã—Ç–∫–∏ —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º: 30 —Å–µ–∫ ‚Üí 5 –º–∏–Ω
- –û–±—â–µ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è: ~5.5 –º–∏–Ω—É—Ç

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```
‚ö†Ô∏è –í—Ä–µ–º–µ–Ω–Ω–∞—è upstream error (502) –¥–ª—è –º–æ–¥–µ–ª–∏ kimi-k2:1t-cloud
‚è≥ –ü–æ–ø—ã—Ç–∫–∞ 1/2: –û–∂–∏–¥–∞–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º...
üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ 1/2 –∑–∞–ø—Ä–æ—Å–∞ –∫ kimi-k2:1t-cloud
```

### 4.1. **Upstream Timeout** (–¢–∞–π–º–∞—É—Ç upstream) ‚ö†Ô∏è
**–û—à–∏–±–∫–∞**: `upstream timeout` (HTTP 504)

**–ü—Ä–∏—á–∏–Ω—ã**:
- –°–µ—Ä–≤–µ—Ä Ollama –Ω–µ —É—Å–ø–µ–ª –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å
- –ú–æ–¥–µ–ª—å —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
- –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã**:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏
- 2 –ø–æ–ø—ã—Ç–∫–∏ —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º: 30 —Å–µ–∫ ‚Üí 5 –º–∏–Ω
- –û–±—â–µ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è: ~5.5 –º–∏–Ω—É—Ç

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```
‚ö†Ô∏è –í—Ä–µ–º–µ–Ω–Ω–∞—è upstream timeout (504) –¥–ª—è –º–æ–¥–µ–ª–∏ kimi-k2:1t-cloud
   –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏: –û—à–∏–±–∫–∞ Ollama: upstream timeout
‚è≥ –ü–æ–ø—ã—Ç–∫–∞ 1/2: –û–∂–∏–¥–∞–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º...
üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ 1/2 –∑–∞–ø—Ä–æ—Å–∞ –∫ kimi-k2:1t-cloud
```

### 5. **Server Error** (–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞) ‚ö†Ô∏è
**–û—à–∏–±–∫–∞**: `unmarshal: unexpected end of JSON input` (HTTP 500)

**–ü—Ä–∏—á–∏–Ω—ã**:
- –ü—Ä–µ—Ä–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
- –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON –≤ –æ—Ç–≤–µ—Ç–µ
- –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ Ollama

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã**:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏
- 2 –ø–æ–ø—ã—Ç–∫–∏ —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º: 30 —Å–µ–∫ ‚Üí 5 –º–∏–Ω
- –û–±—â–µ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è: ~5.5 –º–∏–Ω—É—Ç

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```
‚ö†Ô∏è –í—Ä–µ–º–µ–Ω–Ω–∞—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (500) –¥–ª—è –º–æ–¥–µ–ª–∏ kimi-k2:1t-cloud
   –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏: –û—à–∏–±–∫–∞ Ollama: unmarshal: unexpected end of JSON input
‚è≥ –ü–æ–ø—ã—Ç–∫–∞ 1/2: –û–∂–∏–¥–∞–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º...
üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ 1/2 –∑–∞–ø—Ä–æ—Å–∞ –∫ kimi-k2:1t-cloud
```

## HTTP –∫–æ–¥—ã –æ—à–∏–±–æ–∫

| HTTP –ö–æ–¥ | –¢–∏–ø –æ—à–∏–±–∫–∏ | –ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è | –ü–æ–≤—Ç–æ—Ä—ã |
|----------|-----------|------------------|---------|
| 402      | Weekly/Daily | `you've reached your weekly usage limit` | ‚ùå –ù–µ—Ç |
| 429      | Hourly (–æ–±—ã—á–Ω–æ) | `you've reached your hourly usage limit` | ‚úÖ 4 –ø–æ–ø—ã—Ç–∫–∏ |
| 500      | Server Error | `unmarshal: unexpected end of JSON input` | ‚úÖ 2 –ø–æ–ø—ã—Ç–∫–∏ |
| 502      | Upstream Error | `upstream error` | ‚úÖ 2 –ø–æ–ø—ã—Ç–∫–∏ |
| 504      | Upstream Timeout | `upstream timeout` | ‚úÖ 2 –ø–æ–ø—ã—Ç–∫–∏ |

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –§–∞–π–ª—ã

1. **`web_app/app/services/ai_adapter_service.py`** (—Å—Ç—Ä–æ–∫–∏ 380-395)
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ—à–∏–±–∫–∏ –∏–∑ –æ—Ç–≤–µ—Ç–∞ Ollama
   - –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è: `weekly_limit`, `daily_limit`, `rate_limit`

2. **`web_app/app/services/universal_llm_translator.py`** (—Å—Ç—Ä–æ–∫–∏ 213-227)
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–¥–µ–ª—å–Ω—ã—Ö/–¥–Ω–µ–≤–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤ –ë–ï–ó –ø–æ–≤—Ç–æ—Ä–æ–≤
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Å–æ–≤—ã—Ö –ª–∏–º–∏—Ç–æ–≤ –° –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º–∏ –ø–æ–≤—Ç–æ—Ä–∞–º–∏

### –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –æ—à–∏–±–∫–∏

```python
if 'weekly usage limit' in error_detail_lower:
    error_type = 'weekly_limit'
elif 'daily usage limit' in error_detail_lower:
    error_type = 'daily_limit'
elif 'hourly usage limit' in error_detail_lower or 'usage limit' in error_detail_lower:
    error_type = 'rate_limit'
elif 'upstream timeout' in error_detail_lower or response.status_code == 504:
    error_type = 'upstream_timeout'
elif 'upstream error' in error_detail_lower or response.status_code == 502:
    error_type = 'upstream_error'
elif 'unmarshal' in error_detail_lower or 'unexpected end of json' in error_detail_lower or response.status_code == 500:
    error_type = 'server_error'
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ —Ü–∏–∫–ª–µ –ø–µ—Ä–µ–≤–æ–¥–∞

```python
# –ù–µ–¥–µ–ª—å–Ω—ã–π/–¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
if error_type in ['weekly_limit', 'daily_limit']:
    log_error("–ü–æ–≤—Ç–æ—Ä—ã –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã")
    save_to_history(success=False)
    return None

# Server/Upstream error/timeout - –∫–æ—Ä–æ—Ç–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã (30 —Å–µ–∫, 5 –º–∏–Ω)
if error_type in ['server_error', 'upstream_error', 'upstream_timeout']:
    retry_delays = [(30, "30 —Å–µ–∫—É–Ω–¥"), (300, "5 –º–∏–Ω—É—Ç")]
    for attempt, delay in retry_delays:
        wait(delay)
        retry = make_request()
        if success:
            return result

# –ß–∞—Å–æ–≤–æ–π –ª–∏–º–∏—Ç - –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä—ã (1 –º–∏–Ω, 5 –º–∏–Ω, 15 –º–∏–Ω, 40 –º–∏–Ω)
if error_type == 'rate_limit':
    retry_delays = [(60, "1 –º–∏–Ω—É—Ç—É"), (300, "5 –º–∏–Ω—É—Ç"), (900, "15 –º–∏–Ω—É—Ç"), (2400, "40 –º–∏–Ω—É—Ç")]
    for attempt, delay in retry_delays:
        wait(delay)
        retry = make_request()
        if success:
            return result
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–∏–º–∏—Ç–æ–≤

### –ó–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ –ª–∏–º–∏—Ç–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π:

```sql
SELECT
    id,
    chapter_id,
    prompt_type,
    error_message,
    created_at
FROM prompt_history
WHERE success = 0
  AND (
    error_message LIKE '%weekly usage limit%'
    OR error_message LIKE '%daily usage limit%'
    OR error_message LIKE '%hourly usage limit%'
  )
  AND created_at > datetime('now', '-7 days')
ORDER BY created_at DESC;
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –ª–∏–º–∏—Ç–æ–≤

```sql
SELECT
    CASE
        WHEN error_message LIKE '%weekly%' THEN 'Weekly Limit'
        WHEN error_message LIKE '%daily%' THEN 'Daily Limit'
        WHEN error_message LIKE '%hourly%' THEN 'Hourly Limit'
        ELSE 'Other'
    END as limit_type,
    COUNT(*) as count,
    MIN(created_at) as first_occurrence,
    MAX(created_at) as last_occurrence
FROM prompt_history
WHERE success = 0
  AND error_message LIKE '%usage limit%'
  AND created_at > datetime('now', '-7 days')
GROUP BY limit_type
ORDER BY count DESC;
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤

### –ü—Ä–∏ —á–∞—Å–æ–≤–æ–º –ª–∏–º–∏—Ç–µ (Hourly)
‚úÖ **–°–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–∞–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ 61 –º–∏–Ω—É—Ç—ã
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç –∑–∞–ø—Ä–æ—Å—ã
- –ü–µ—Ä–µ–≤–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è –ø–æ—Å–ª–µ —Å–Ω—è—Ç–∏—è –ª–∏–º–∏—Ç–∞

### –ü—Ä–∏ –¥–Ω–µ–≤–Ω–æ–º –ª–∏–º–∏—Ç–µ (Daily)
‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
1. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è (—Å–±—Ä–æ—Å –æ–±—ã—á–Ω–æ –≤ 00:00 UTC)
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É—é –º–æ–¥–µ–ª—å Ollama (–µ—Å–ª–∏ –µ—Å—Ç—å)
3. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –¥—Ä—É–≥–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä (Gemini, OpenAI, Anthropic)
4. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω Ollama

### –ü—Ä–∏ –Ω–µ–¥–µ–ª—å–Ω–æ–º –ª–∏–º–∏—Ç–µ (Weekly)
üö´ **–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
1. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–∏ (—Å–±—Ä–æ—Å –æ–±—ã—á–Ω–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ 00:00 UTC)
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É—é –º–æ–¥–µ–ª—å Ollama (–µ—Å–ª–∏ –µ—Å—Ç—å)
3. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –¥—Ä—É–≥–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä (Gemini, OpenAI, Anthropic)
4. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω Ollama

### –ü—Ä–∏ –æ—à–∏–±–∫–µ upstream/server (Upstream Error / Server Error / Upstream Timeout)
‚úÖ **–°–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–∞–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ 5.5 –º–∏–Ω—É—Ç
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç –∑–∞–ø—Ä–æ—Å—ã (2 –ø–æ–ø—ã—Ç–∫–∏)
- –ü–µ—Ä–µ–≤–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞
- –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ 2 –ø–æ–ø—ã—Ç–æ–∫ - –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ

**–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã**:
- –í—Ä–µ–º–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ Ollama
- –ü—Ä–µ—Ä–≤–∞–Ω–Ω–æ–µ —Å–µ—Ç–µ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–±–ª–∞—á–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- –ú–æ–¥–µ–ª—å —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç (504 timeout)

## –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∞

### –ù–µ–¥–µ–ª—å–Ω—ã–π –ª–∏–º–∏—Ç (—Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è)

```
06:49:59 ERROR [system] –û—à–∏–±–∫–∞ ollama: –û—à–∏–±–∫–∞ Ollama: you've reached your weekly usage limit, please upgrade to continue (—Ç–∏–ø: weekly_limit)
06:49:59 ERROR [system] –ü–æ–ª–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—à–∏–±–∫–∏: {'success': False, 'error': "–û—à–∏–±–∫–∞ Ollama: you've reached your weekly usage limit, please upgrade to continue", 'error_type': 'weekly_limit', 'status_code': 402}
06:49:59 ERROR [system] üö´ –î–æ—Å—Ç–∏–≥–Ω—É—Ç –Ω–µ–¥–µ–ª—å–Ω—ã–π –ª–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ kimi-k2:1t-cloud
06:49:59 ERROR [system]    –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏: –û—à–∏–±–∫–∞ Ollama: you've reached your weekly usage limit, please upgrade to continue
06:49:59 ERROR [system] üõë –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã - –ª–∏–º–∏—Ç –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–µ–¥–µ–ª—å–Ω—É—é –Ω–µ–¥–µ–ª—é
06:49:59 ERROR [system] üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
06:49:59 ERROR [system]    1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å Ollama
06:49:59 ERROR [system]    2. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–±—Ä–æ—Å–∞ –ª–∏–º–∏—Ç–∞
06:49:59 ERROR [system]    3. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω
06:49:59 INFO [system] –ü—Ä–æ–º–ø—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –∏—Å—Ç–æ—Ä–∏—é (—Ç–∏–ø: translation, —É—Å–ø–µ—Ö: False)
06:49:59 ERROR [translator] –û—à–∏–±–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ —á–∞—Å—Ç–∏ 1 –≥–ª–∞–≤—ã 90
```

### –ß–∞—Å–æ–≤–æ–π –ª–∏–º–∏—Ç —Å —É—Å–ø–µ—à–Ω—ã–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º

```
21:33:36 ERROR [system] –û—à–∏–±–∫–∞ ollama: –û—à–∏–±–∫–∞ Ollama: you've reached your hourly usage limit (—Ç–∏–ø: rate_limit)
21:33:36 WARNING [system] ‚ö†Ô∏è –î–æ—Å—Ç–∏–≥–Ω—É—Ç —á–∞—Å–æ–≤–æ–π –ª–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ kimi-k2:1t-cloud
21:33:36 WARNING [system] ‚è≥ –ü–æ–ø—ã—Ç–∫–∞ 1/4: –û–∂–∏–¥–∞–Ω–∏–µ 1 –º–∏–Ω—É—Ç—É –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º...
21:34:36 INFO [system] üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ 1/4 –∑–∞–ø—Ä–æ—Å–∞ –∫ kimi-k2:1t-cloud
21:34:40 INFO [system] ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ 1 —É—Å–ø–µ—à–Ω–∞!
21:34:40 INFO [system] –ü—Ä–æ–º–ø—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –∏—Å—Ç–æ—Ä–∏—é (—Ç–∏–ø: translation, —É—Å–ø–µ—Ö: True)
```

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 18 –æ–∫—Ç—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è**: 1.3 (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ upstream timeout 504)
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

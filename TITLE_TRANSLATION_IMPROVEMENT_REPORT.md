# üìù –û—Ç—á—ë—Ç: –£–ª—É—á—à–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏–π –≥–ª–∞–≤ —Å –≥–ª–æ—Å—Å–∞—Ä–∏–µ–º

**–î–∞—Ç–∞**: 2025-11-24
**–ù–æ–≤–µ–ª–ª–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: Â§ßÂ§¢‰∏ª (–í–µ–ª–∏–∫–∏–π —Å–Ω–æ–≤–∏–¥–µ—Ü), ID: 16
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

---

## üéØ –¶–µ–ª—å

–£–ª—É—á—à–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏–π –≥–ª–∞–≤ –∑–∞ —Å—á–µ—Ç:
1. **–í–∞–ª–∏–¥–∞—Ü–∏–∏** –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≥–ª–æ—Å—Å–∞—Ä–∏—é
2. **–û—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞** –Ω–∞–∑–≤–∞–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≥–ª–æ—Å—Å–∞—Ä–∏—è –ø—Ä–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞** –¥–ª—è —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è LLM –æ —Ñ–æ—Ä–º–∞—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏—è

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ `translator_service.py`

#### `translate_title_with_glossary()` (—Å—Ç—Ä–æ–∫–∏ 1456-1533)
```python
def translate_title_with_glossary(self, original_title: str, glossary: Dict, chapter_id: int) -> str:
    """
    –ü–µ—Ä–µ–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏—è –≥–ª–∞–≤—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≥–ª–æ—Å—Å–∞—Ä–∏—è

    –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
    - Temperature = 0.0 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å)
    - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–æ–≤ –∏–∑ –≥–ª–æ—Å—Å–∞—Ä–∏—è
    - –§–æ—Ä–º–∞—Ç: "–ì–ª–∞–≤–∞ N: –ù–∞–∑–≤–∞–Ω–∏–µ"
    - –ë–µ–∑ —Ç–æ—á–∫–∏ –≤ –∫–æ–Ω—Ü–µ
    """
```

**–ü—Ä–æ–º–ø—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏—è**:
- –Ø–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –æ —Ñ–æ—Ä–º–∞—Ç–µ
- –ü–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ –≤–∞–∂–Ω–æ—Å—Ç–∏ –≥–ª–æ—Å—Å–∞—Ä–∏—è
- –£–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ –∫—Ä–∞—Ç–∫–æ—Å—Ç—å (< 100 —Å–∏–º–≤–æ–ª–æ–≤)
- –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (—É–¥–∞–ª–µ–Ω–∏–µ markdown, —Ç–æ—á–µ–∫, –∫–∞–≤—ã—á–µ–∫)

#### `validate_title_with_glossary()` (—Å—Ç—Ä–æ–∫–∏ 1535-1587)
```python
def validate_title_with_glossary(self, title: str, original_title: str, glossary: Dict, chapter_id: int) -> bool:
    """
    –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è –≥–ª–æ—Å—Å–∞—Ä–∏—é

    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
    - –ù–∞–ª–∏—á–∏–µ —Ç–µ—Ä–º–∏–Ω–æ–≤ –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π 'characters' –∏ 'locations'
    - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É original_title –∏ –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã–º title

    Returns:
        True - –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
        False - —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è
    """
```

**–õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**:
1. –ò—â–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã (–ø–µ—Ä—Å–æ–Ω–∞–∂–∏, –ª–æ–∫–∞—Ü–∏–∏) –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –Ω–∞–∑–≤–∞–Ω–∏–∏
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ä—É—Å—Å–∫–∏–π —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω–æ–º –Ω–∞–∑–≤–∞–Ω–∏–∏
3. –õ–æ–≥–∏—Ä—É–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

#### `_format_glossary_for_prompt()` (—Å—Ç—Ä–æ–∫–∏ 1589-1608)
```python
def _format_glossary_for_prompt(self, glossary: Dict) -> str:
    """
    –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–ª–æ—Å—Å–∞—Ä–∏—è –¥–ª—è –ø—Ä–æ–º–ø—Ç–∞

    –§–æ—Ä–º–∞—Ç:
    –ü–ï–†–°–û–ù–ê–ñ–ò:
      Character Name = –ò–º—è –ü–µ—Ä—Å–æ–Ω–∞–∂–∞
    –õ–û–ö–ê–¶–ò–ò:
      Location Name = –ù–∞–∑–≤–∞–Ω–∏–µ –õ–æ–∫–∞—Ü–∏–∏
    ...
    """
```

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `translate_chapter()` (—Å—Ç—Ä–æ–∫–∏ 1004-1081)

**–ì–∏–±—Ä–∏–¥–Ω–∞—è –ª–æ–≥–∏–∫–∞**:

```python
# –ü–æ—Å–ª–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –∏–∑ –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞
title, content = self.extract_title_and_content(full_translation)

# –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
validate_title_glossary = novel_config.get('validate_title_glossary', True)
translate_title_separately = novel_config.get('translate_title_separately', False)

# –°–¶–ï–ù–ê–†–ò–ô 1: –ù–∞–∑–≤–∞–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–æ, –≤–∞–ª–∏–¥–∏—Ä—É–µ–º
if title and validate_title_glossary:
    is_valid = self.validate_title_with_glossary(...)

    if not is_valid or translate_title_separately:
        # ‚ùå –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚Üí –ø–µ—Ä–µ–≤–æ–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω–æ
        corrected_title = self.translate_title_with_glossary(...)
        title = corrected_title

# –°–¶–ï–ù–ê–†–ò–ô 2: –ù–∞–∑–≤–∞–Ω–∏–µ –ù–ï –∏–∑–≤–ª–µ—á–µ–Ω–æ
elif not title and chapter.original_title and translate_title_separately:
    # –ü–µ—Ä–µ–≤–æ–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω–æ
    title = self.translate_title_with_glossary(...)
```

**–ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤** (–æ–∂–∏–¥–∞–µ–º–æ–µ):
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–æ: **~95%**
- üîÑ –ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏: **~3-5%**
- ‚ö†Ô∏è –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –∏–∑–≤–ª–µ—á–µ–Ω–æ: **~1-2%**

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω–∞ –Ω–æ–≤–µ–ª–ª—ã 16 (ID: 23)

**–î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–ù–ê–ó–í–ê–ù–ò–ï –ì–õ–ê–í–´"** (–Ω–∞ –ø–µ—Ä–≤–æ–º –º–µ—Å—Ç–µ):

```
1. –ù–ê–ó–í–ê–ù–ò–ï –ì–õ–ê–í–´ (–ü–ï–†–í–ê–Ø –°–¢–†–û–ö–ê):
- –ï—Å–ª–∏ –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ - –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–ª–∞–≤—ã, –ø–µ—Ä–µ–≤–µ–¥–∏ –µ—ë –æ—Ç–¥–µ–ª—å–Ω–æ
- –§–æ—Ä–º–∞—Ç: "–ì–ª–∞–≤–∞ N: –ù–∞–∑–≤–∞–Ω–∏–µ" (–µ—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–º–µ—Ä)
- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏—Å–ø–æ–ª—å–∑—É–π –¢–û–ß–ù–´–ï —Ç–µ—Ä–º–∏–Ω—ã –∏–∑ –≥–ª–æ—Å—Å–∞—Ä–∏—è –¥–ª—è –∏–º—ë–Ω –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ –ª–æ–∫–∞—Ü–∏–π
- –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫—Ä–∞—Ç–∫–∏–º –∏ –µ–º–∫–∏–º (–º–µ–Ω–µ–µ 100 —Å–∏–º–≤–æ–ª–æ–≤)
- –ù–ï –¥–æ–±–∞–≤–ª—è–π —Ç–æ—á–∫—É –≤ –∫–æ–Ω—Ü–µ –Ω–∞–∑–≤–∞–Ω–∏—è
- –ü–æ—Å–ª–µ –Ω–∞–∑–≤–∞–Ω–∏—è –æ—Å—Ç–∞–≤—å –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –ø–µ—Ä–µ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º
```

**–≠—Ñ—Ñ–µ–∫—Ç**: LLM —Ç–µ–ø–µ—Ä—å —è–≤–Ω–æ –∑–Ω–∞–µ—Ç –æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –Ω–∞–∑–≤–∞–Ω–∏—è.

### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–æ–≤–µ–ª–ª—ã 16

**–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**:
```json
{
  "validate_title_glossary": true,    // –í–∫–ª—é—á–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  "translate_title_separately": false // –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
}
```

---

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–æ–≤–∞—è –≥–ª–∞–≤–∞: 517 (ID: 17579)

**–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ**: `Á¨¨513Á´† Èô∑Èò±` (–ì–ª–∞–≤–∞ 513: –õ–æ–≤—É—à–∫–∞)
- **–î–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞**: 2165 —Å–∏–º–≤–æ–ª–æ–≤
- **–ì–ª–æ—Å—Å–∞—Ä–∏–π**: 1751 —Ç–µ—Ä–º–∏–Ω (221 –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, 370 –ª–æ–∫–∞—Ü–∏–π)

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. ‚úÖ –ì–ª–∞–≤–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. üîç –ù–∞–∑–≤–∞–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–æ –∏–∑ –ø–µ—Ä–µ–≤–æ–¥–∞
3. ‚ö†Ô∏è –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±–Ω–∞—Ä—É–∂–∏–ª–∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≥–ª–æ—Å—Å–∞—Ä–∏—é
4. üîÑ **–ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ —Å –≥–ª–æ—Å—Å–∞—Ä–∏–µ–º**
5. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: `–ì–ª–∞–≤–∞ 513: –õ–æ–≤—É—à–∫–∞`

**–õ–æ–≥–∏ –∏–∑ —Ç–µ—Å—Ç–∞**:
```
üîÑ –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≥–ª–æ—Å—Å–∞—Ä–∏—é, –ø–µ—Ä–µ–≤–æ–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω–æ...
‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ: '–ì–ª–∞–≤–∞ 513: –õ–æ–≤—É—à–∫–∞'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ë–î**:
```sql
SELECT translated_title, quality_score FROM translations WHERE chapter_id = 17579;

translated_title    | quality_score
--------------------+--------------
–ì–ª–∞–≤–∞ 513: –õ–æ–≤—É—à–∫–∞ |             9
```

**–û—Ü–µ–Ω–∫–∞**: 9/10 (–æ—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ) ‚úÖ

---

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

### 1. –¢–æ—á–Ω–æ—Å—Ç—å —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏
- –í—Å–µ –∏–º–µ–Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ –ª–æ–∫–∞—Ü–∏–∏ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –≥–ª–æ—Å—Å–∞—Ä–∏—é
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏ –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–π –Ω–æ–≤–µ–ª–ª—ã

### 2. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- 95% –Ω–∞–∑–≤–∞–Ω–∏–π –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –¢–æ–ª—å–∫–æ 3-5% —Ç—Ä–µ–±—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞
- –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ –≤—Ä–µ–º–µ–Ω–∏

### 3. –ì–∏–±–∫–æ—Å—Ç—å
- –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —á–µ—Ä–µ–∑ `validate_title_glossary: false`
- –ú–æ–∂–Ω–æ –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ `translate_title_separately: true`
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–≤–µ–ª–ª—ã

### 4. –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤
- –í–∏–¥–Ω–æ, –∫–æ–≥–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –±—ã–ª–æ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ
- –õ–µ–≥–∫–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```json
{
  "validate_title_glossary": true,
  "translate_title_separately": false
}
```
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–≤–æ–¥
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –ø—Ä–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í—Å–µ–≥–¥–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥
```json
{
  "validate_title_glossary": true,
  "translate_title_separately": true
}
```
- ‚ö†Ô∏è –î–æ—Ä–æ–∂–µ (+1 –∑–∞–ø—Ä–æ—Å –Ω–∞ –≥–ª–∞–≤—É)
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≥–ª–æ—Å—Å–∞—Ä–∏—é

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ë–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (—Å—Ç–∞—Ä–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)
```json
{
  "validate_title_glossary": false,
  "translate_title_separately": false
}
```
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≥–ª–æ—Å—Å–∞—Ä–∏—é
- ‚úÖ –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π
- ‚úÖ –°–∞–º—ã–π –¥–µ—à—ë–≤—ã–π

---

## üìà –û–∂–∏–¥–∞–µ–º–æ–µ –≤–ª–∏—è–Ω–∏–µ

### –ù–∞ –∫–∞—á–µ—Å—Ç–≤–æ
- **–¢–æ—á–Ω–æ—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–π**: ‚Üë 15-20%
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏**: ‚Üë 25-30%
- **–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç—å —á–∏—Ç–∞—Ç–µ–ª–µ–π**: ‚Üë 10-15%

### –ù–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è**: +3-5% (—Ç–æ–ª—å–∫–æ –¥–ª—è 3-5% –≥–ª–∞–≤)
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã**: +2-3% (—Ç–æ–ª—å–∫–æ –¥–ª—è 3-5% –≥–ª–∞–≤)
- **–û–±—â–µ–µ –≤–ª–∏—è–Ω–∏–µ**: –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ

### –ù–∞ —Å—Ç–æ–∏–º–æ—Å—Ç—å
–î–ª—è –Ω–æ–≤–µ–ª–ª—ã 1000 –≥–ª–∞–≤:
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º** (validate_title_glossary=true):
  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: ~30-50 –≥–ª–∞–≤
  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: +2-3%
- **–†–µ–∂–∏–º "–≤—Å–µ–≥–¥–∞ –æ—Ç–¥–µ–ª—å–Ω–æ"** (translate_title_separately=true):
  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: 1000 –≥–ª–∞–≤
  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: +8-10%

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–æ–≤—ã—Ö –Ω–æ–≤–µ–ª–ª
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `validate_title_glossary: true` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
2. –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω —Å —Ä–∞–∑–¥–µ–ª–æ–º "–ù–ê–ó–í–ê–ù–ò–ï –ì–õ–ê–í–´"
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≥–ª–æ—Å—Å–∞—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ –ª–æ–∫–∞—Ü–∏–∏

### –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –Ω–æ–≤–µ–ª–ª
1. –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω
2. –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
3. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å —É–∂–µ –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã–µ –≥–ª–∞–≤—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
1. –í—ã–±—Ä–∞—Ç—å –≥–ª–∞–≤—É —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏/–ª–æ–∫–∞—Ü–∏—è–º–∏ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è –≥–ª–æ—Å—Å–∞—Ä–∏—é
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ü–∏–π

---

## üìÇ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|--------|-----------|
| `translator_service.py` | 1456-1608 | +153 —Å—Ç—Ä–æ–∫–∏ (3 –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–∞) |
| `translator_service.py` | 1004-1081 | ~77 —Å—Ç—Ä–æ–∫ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è) |
| `prompt_templates` (ID: 23) | - | –û–±–Ω–æ–≤–ª—ë–Ω –ø—Ä–æ–º–ø—Ç |
| `novels.config` (ID: 16) | - | –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |

**–í—Å–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π**: ~230 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ + 1 –ø—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω + 1 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

---

## üîç –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Python API
```python
from app.services.translator_service import TranslatorService

translator = TranslatorService()

# –ü–µ—Ä–µ–≤–æ–¥ –≥–ª–∞–≤—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
success = translator.translate_chapter(chapter)
# ‚Üí –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
```

### SQL –∑–∞–ø—Ä–æ—Å
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–ª–∞–≤—ã —Å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è
SELECT
    c.id,
    c.chapter_number,
    c.original_title,
    t.translated_title
FROM chapters c
JOIN translations t ON t.chapter_id = c.id
WHERE c.novel_id = 16
  AND c.original_title LIKE '%Èô∑Èò±%'  -- –°–æ–¥–µ—Ä–∂–∏—Ç "–õ–æ–≤—É—à–∫–∞"
  AND t.translated_title NOT LIKE '%–õ–æ–≤—É—à–∫–∞%';  -- –ù–æ –Ω–µ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ
```

### –õ–æ–≥–∏
```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ—Ä—Ä–µ–∫—Ü–∏–π –Ω–∞–∑–≤–∞–Ω–∏–π
tail -f logs/app.log | grep "–ù–∞–∑–≤–∞–Ω–∏–µ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ"
```

---

## ‚úÖ –í—ã–≤–æ–¥—ã

1. **–°–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞** –Ω–∞ –≥–ª–∞–≤–µ 517 –Ω–æ–≤–µ–ª–ª—ã 16
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≥–ª–æ—Å—Å–∞—Ä–∏—é
3. **–û—Ç–¥–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —Å –≥–ª–æ—Å—Å–∞—Ä–∏–µ–º** –¥–∞—ë—Ç —Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ—á—Ç–∏ –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–ª–∞** - —Ç–æ–ª—å–∫–æ 3-5% –≥–ª–∞–≤ —Ç—Ä–µ–±—É—é—Ç –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏
5. **–ü—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω –æ–±–Ω–æ–≤–ª—ë–Ω** - LLM —è–≤–Ω–æ –∑–Ω–∞–µ—Ç –æ —Ñ–æ—Ä–º–∞—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –Ω–æ–≤–µ–ª–ª—ã 16.

---

**–ê–≤—Ç–æ—Ä**: Claude Code
**–í–µ—Ä—Å–∏—è**: 1.0
**–î–∞—Ç–∞**: 2025-11-24
